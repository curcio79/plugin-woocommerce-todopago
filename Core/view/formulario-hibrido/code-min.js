var idTarjetas={42:"VISA",43:"VISAD",1:"AMEX",2:"DINERS",6:"CABAL",7:"CABALD",14:"MC",15:"MCD"},diccionarioTarjetas={VISA:"VISA","VISA DEBITO":"VISAD",AMEX:"AMEX",DINERS:"DINERS",CABAL:"CABAL","CABAL DEBITO":"CABALD","MASTER CARD":"MC","MASTER CARD DEBITO":"MCD",NARANJA:"NARANJA"};function clearImage(){tarjetaLogo.src=emptyImg}function cardImage(e){var o=idTarjetas[e.value];void 0===o&&(o=diccionarioTarjetas[e.textContent]),void 0!==o&&(tarjetaLogo.src="https://forms.todopago.com.ar/formulario/resources/images/"+o+".png",tarjetaLogo.style.display="block")}function detector(){console.log(tpformJquery("#tp-form").width());var e=tpformJquery("#tp-form").width(),o=tpformJquery("input"),t=tpformJquery("select");e<500&&(o.css("font-size",9),t.css("font-size",9))}function loadScript(e,o){var t=-1===e.indexOf("developers")?"prod":"developers";poweredLogo.src=poweredLogoUrl+"tp_logo_"+t+".png";var r=document.createElement("script");r.type="text/javascript",r.readyState?r.onreadystatechange=function(){"loaded"!==r.readyState&&"complete"!==r.readyState||(r.onreadystatechange=null,o())}:r.onload=function(){o()},r.src=e,document.getElementsByTagName("head")[0].appendChild(r)}function loader(){tpformJquery("#loading-hibrid").css("width","50%"),setTimeout(function(){ignite(),tpformJquery(".payment-method").hide(),tpformJquery(".billeterafm_tp").hide()},100),setTimeout(function(){tpformJquery("#loading-hibrid").css("width","100%")},1e3),setTimeout(function(){tpformJquery(".progress").hide("fast"),"<?php echo TodoPagoUtilsConstantes::TODOPAGO_BILLETERA; ?>"===tipoDePago&&(btnBilletera.click(),todoPagoSection.style.opacity="0",todoPagoSection.style.height="0px",todoPagoSection.style.display="none")},2e3),setTimeout(function(){btnBilletera.innerText="Iniciar Sesión",tpformJquery("#tpForm").fadeTo("fast",1)},2200)}function billeteraPaymentResponse(e){console.log("Iniciando billetera"),console.log(e.ResultCode+" -> "+e.ResultMessage),e.AuthorizationKey?window.location.href=urlSuccess+"&Answer="+e.AuthorizationKey:window.location.href=urlError+"&Error="+e.ResultMessage}function customPaymentSuccessResponse(e){console.log("Success"),console.log(e.ResultCode+" -> "+e.ResultMessage),window.location.href=urlSuccess+"&Answer="+e.AuthorizationKey}function customPaymentErrorResponse(e){console.log(e.ResultCode+" -> "+e.ResultMessage),e.AuthorizationKey?window.location.href=urlError+"&Answer="+e.AuthorizationKey:window.location.href=urlError+"&Error="+e.ResultMessage}function activateSwitch(e){readPeiCbx(),e||switchPei.click(function(){console.log("CHECKED",peiCbx.prop("checked")),peiCbx.prop("checked")?(switchPei.prop("checked",!0),peiCbx.prop("checked",!0),sliderText.text("SÍ"),sliderText.css("transform","translateX(0)")):(switchPei.prop("checked",!1),peiCbx.prop("checked",!1),sliderText.text("NO"),sliderText.css("transform","translateX(26px)"))})}function readPeiCbx(){peiCbx.prop("checked",!0)?(switchPei.prop("checked",!0),sliderText.text("SÍ"),sliderText.css("transform","translateX(0)")):(switchPei.prop("checked",!0),sliderText.text("NO"),sliderText.css("transform","translateX(26px)"))}function getPEIState(){return peiCbx.prop("disabled")}function ignite(){window.TPFORMAPI.hybridForm.initForm({callbackValidationErrorFunction:"validationCollector",callbackBilleteraFunction:"billeteraPaymentResponse",callbackCustomSuccessFunction:"customPaymentSuccessResponse",callbackCustomErrorFunction:"customPaymentErrorResponse",botonPagarId:"btn_ConfirmarPago",botonPagarConBilleteraId:"btn_billetera",modalCssClass:"modal-class",modalContentCssClass:"modal-content",beforeRequest:"initLoading",afterRequest:"stopLoading"}),window.TPFORMAPI.hybridForm.setItem({publicKey:security,defaultNombreApellido:completeName,defaultMail:mail,defaultTipoDoc:defDniType})}numeroTarjetaTxt.onblur=clearImage,loadScript(urlScript,function(){loader()}),window.validationCollector=function(e){console.log("My validator collector"),console.log(e.field+" -> "+e.error),tpformJquery("#peibox").hide();var o=e.field;-1!==o.search("Txt")?label=o.replace("Txt","Lbl"):label=o.replace("Cbx","Lbl"),null!==document.getElementById(label)&&(document.getElementById(label).innerText=e.error)},window.initLoading=function(){console.log("init"),cardImage(medioDePago),tpformJquery("#peibox").hide()},window.stopLoading=function(){console.log("Stop loading..."),tpformJquery("#peibox").hide(),"inline-block"===document.getElementById("peiLbl").style.display?tpformJquery("#peibox").css("display","table-cell"):(tpformJquery("#peibox").hide("fast"),peiCbx.prop("checked",!1));var e=tpformJquery("#row-pei");"none"!==peiCbx.css("display")?activateSwitch(getPEIState()):(e.css("display","none"),peiCbx.prop("checked",!1))},tpformJquery("#peiLbl").bind("DOMSubtreeModified",function(){tpformJquery("#peibox").hide()}),helperCaller.click(function(){helperPopover.toggle(500)}),helperPopover.click(function(){helperPopover.toggle(500)});
